<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{admin/layout}">
<head>
<title>List Category</title>
</head>
<body>
	<div layout:fragment="content" class="card shadow p-4">

		<div class="d-flex justify-content-between align-items-center mb-3">
			<h4 class="mb-0">Danh sách Category</h4>
			<a th:href="@{/admin/categories/new}" class="btn btn-primary"> <i
				class="fa-solid fa-plus"></i> Thêm mới
			</a>
		</div>

		<!-- Search -->
		<form th:action="@{/admin/categories}" method="get"
			class="input-group mb-3">
			<input type="text" name="keyword" th:value="${keyword}"
				class="form-control" placeholder="Nhập từ khóa để tìm..." />
			<button class="btn btn-outline-primary" type="submit">
				<i class="fa-solid fa-search"></i> Tìm kiếm
			</button>
		</form>

		<!-- Table -->
		<div class="table-responsive">
			<table
				class="table table-striped table-hover align-middle text-center">
				<thead class="table-dark">
					<tr>
						<th>ID</th>
						<th>Ảnh</th>
						<th>Tên Category</th>
						<th>Hành động</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="c : ${listCategories}">
						<td th:text="${c.categoryId}"></td>
						<td><img th:if="${c.icon != null}"
							th:src="@{'/images/' + ${c.icon}}" class="img-thumbnail"
							style="max-width: 80px;" /></td>
						<td th:text="${c.categoryName}"></td>
						<td><a
							th:href="@{'/admin/categories/edit/' + ${c.categoryId}}"
							class="btn btn-sm btn-warning text-white me-1"> <i
								class="fa-solid fa-pen"></i>
						</a> <a th:href="@{'/admin/categories/delete/' + ${c.categoryId}}"
							class="btn btn-sm btn-danger"
							onclick="return confirm('Bạn có chắc muốn xóa?')"> <i
								class="fa-solid fa-trash"></i>
						</a></td>
					</tr>
				</tbody>
			</table>
		</div>

		<!-- Pagination -->
		<div class="d-flex justify-content-between align-items-center mt-3">
			<span th:text="'Trang ' + (${currentPage}+1) + ' / ' + ${totalPages}"></span>
			<nav>
				<ul class="pagination mb-0">
					<li class="page-item"
						th:classappend="${currentPage == 0} ? 'disabled'"><a
						class="page-link"
						th:href="@{/admin/categories(page=0, keyword=${keyword})}">First</a>
					</li>
					<li class="page-item"
						th:each="i : ${#numbers.sequence(0, totalPages-1)}"
						th:classappend="${i == currentPage} ? 'active'"><a
						class="page-link"
						th:href="@{/admin/categories(page=${i}, keyword=${keyword})}"
						th:text="${i+1}"></a></li>
					<li class="page-item"
						th:classappend="${currentPage + 1 == totalPages} ? 'disabled'">
						<a class="page-link"
						th:href="@{/admin/categories(page=${totalPages-1}, keyword=${keyword})}">Last</a>
					</li>
				</ul>
			</nav>
		</div>

	</div>
</body>
</html>
