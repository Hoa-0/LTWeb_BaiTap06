<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org"
	xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
	layout:decorate="~{admin/fragments/layout}">
<head>
<title>List Category</title>
</head>
<body>
	<section layout:fragment="content">
		<div class="card">
			<div class="card-header">
				<h3>List Category</h3>
			</div>
			<div class="card-body">
				<div th:if="${message != null}" class="alert alert-success"
					role="alert">
					<i>[[${message}]]</i>
				</div>

				<div class="row mb-3">
					<div class="col">
						<form th:action="@{/admin/categories}">
							<div class="input-group">
								<input type="text" class="form-control" name="name"
									placeholder="Nhập từ khóa để tìm" th:value="${name}">
								<button class="btn btn-outline-secondary" type="submit">
									<i class="fa-solid fa-magnifying-glass"></i> Search
								</button>
							</div>
						</form>
					</div>
					<div class="col-auto">
						<a th:href="@{/admin/categories/add}" class="btn btn-primary">Add
							New Category</a>
					</div>
				</div>

				<table class="table table-striped table-bordered">
					<thead class="table-dark">
						<tr>
							<th>Category ID</th>
							<th>Icon</th>
							<th>Category Name</th>
							<th style="width: 120px;">Action</th>
						</tr>
					</thead>
					<tbody>
						<tr th:each="category : ${categoryPage.content}">
							<td th:text="${category.categoryId}"></td>
							<td><img th:if="${category.icon != null}"
								th:src="@{'/admin/categories/uploads/' + ${category.icon}}"
								width="70px" class="img-thumbnail"> <img
								th:if="${category.icon == null}"
								th:src="@{https://via.placeholder.com/70}" width="70px"
								class="img-thumbnail"></td>
							<td th:text="${category.categoryName}"></td>
							<td><a
								th:href="@{'/admin/categories/edit/' + ${category.categoryId}}"
								class="btn btn-outline-info btn-sm"><i
									class="fa-solid fa-pen-to-square"></i></a> <a
								th:href="@{'/admin/categories/delete/' + ${category.categoryId}}"
								class="btn btn-outline-danger btn-sm"
								onclick="return confirm('Are you sure you want to delete this category?');"><i
									class="fa-solid fa-trash"></i></a></td>
						</tr>
					</tbody>
				</table>

				<nav aria-label="Page navigation">
					<ul class="pagination justify-content-center">
						<li class="page-item"
							th:classappend="${categoryPage.first ? 'disabled' : ''}"><a
							class="page-link"
							th:href="@{/admin/categories(name=${name}, page=${categoryPage.number - 1}, size=${categoryPage.size})}">First</a>
						</li>
						<li class="page-item"
							th:each="pageNumber : ${#numbers.sequence(0, categoryPage.totalPages - 1)}"
							th:classappend="${pageNumber == categoryPage.number ? 'active' : ''}">
							<a class="page-link"
							th:href="@{/admin/categories(name=${name}, page=${pageNumber}, size=${categoryPage.size})}">[[${pageNumber
								+ 1}]]</a>
						</li>
						<li class="page-item"
							th:classappend="${categoryPage.last ? 'disabled' : ''}"><a
							class="page-link"
							th:href="@{/admin/categories(name=${name}, page=${categoryPage.number + 1}, size=${categoryPage.size})}">Last</a>
						</li>
					</ul>
				</nav>
			</div>
		</div>
	</section>
</body>
</html>